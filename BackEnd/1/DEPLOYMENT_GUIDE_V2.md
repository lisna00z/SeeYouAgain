# ğŸš€ LiveTalkingæ•°å­—äººç³»ç»Ÿ V2 - å¿«é€Ÿéƒ¨ç½²æŒ‡å—

## âœ¨ V2ç‰ˆæœ¬æ–°ç‰¹æ€§

### ä¸»è¦æ”¹è¿›
- âœ… **MP4è§†é¢‘ä¸Šä¼ ** - æ”¯æŒç›´æ¥ä¸Šä¼ MP4è§†é¢‘è¿›è¡Œè®­ç»ƒ
- âœ… **WAVéŸ³é¢‘é™åˆ¶** - åªæ¥å—WAVæ ¼å¼éŸ³é¢‘
- âœ… **è‡ªåŠ¨æ‰«ææ•°å­—äºº** - ä» `data/avatars` ç›®å½•è‡ªåŠ¨åŠ è½½
- âœ… **è‡ªåŠ¨ç§»åŠ¨è®­ç»ƒç»“æœ** - è®­ç»ƒå®Œæˆåè‡ªåŠ¨ä» `results/avatars` ç§»åŠ¨åˆ° `data/avatars`
- âœ… **å®æ—¶çŠ¶æ€æ›´æ–°** - æ˜¾ç¤ºæ¯ä¸ªæ•°å­—äººçš„è¿è¡ŒçŠ¶æ€

## ğŸ“ æ ¸å¿ƒæ–‡ä»¶ï¼ˆV2ç‰ˆæœ¬ï¼‰

| æ–‡ä»¶ | è¯´æ˜ |
|------|------|
| **[livetalking_backend_v2.py](./livetalking_backend_v2.py)** | åç«¯APIæœåŠ¡V2 |
| **[frontend_v2.py](./frontend_v2.py)** | å‰ç«¯ç•Œé¢V2 |
| **[requirements_backend.txt](./requirements_backend.txt)** | ä¾èµ–åŒ… |

## ğŸ¯ å¿«é€Ÿå¯åŠ¨

### 1. å®‰è£…ä¾èµ–
```bash
pip install fastapi uvicorn gradio requests psutil
```

### 2. å¯åŠ¨åç«¯
```bash
python livetalking_backend_v2.py
```

### 3. å¯åŠ¨å‰ç«¯
```bash
python frontend_v2.py
```

### 4. è®¿é—®ç•Œé¢
æ‰“å¼€æµè§ˆå™¨è®¿é—®: http://localhost:7860

## ğŸ“‚ ç›®å½•ç»“æ„è¯´æ˜

```
D:\Projects\See You Again\src\LiveTalking\LiveTalking-main\
â”œâ”€â”€ data/
â”‚   â””â”€â”€ avatars/                    # å¯ç”¨çš„æ•°å­—äººï¼ˆè‡ªåŠ¨æ‰«æï¼‰
â”‚       â”œâ”€â”€ wav2lip256_avatar1/
â”‚       â”œâ”€â”€ wav2lip256_avatarHH/
â”‚       â””â”€â”€ wav2lip256_avatarMan/
â”œâ”€â”€ wav2lip/
â”‚   â”œâ”€â”€ genavatar.py               # è®­ç»ƒè„šæœ¬
â”‚   â””â”€â”€ results/
â”‚       â””â”€â”€ avatars/                # è®­ç»ƒè¾“å‡ºï¼ˆè‡ªåŠ¨ç§»åŠ¨åˆ°data/avatarsï¼‰
â”œâ”€â”€ wav/                            # éŸ³é¢‘æ–‡ä»¶ç›®å½•
â””â”€â”€ app.py                          # ä¸»ç¨‹åº
```

## ğŸ”§ å·¥ä½œæµç¨‹

### é€‰æ‹©å·²æœ‰æ•°å­—äºº
1. ç³»ç»Ÿè‡ªåŠ¨æ‰«æ `data/avatars` ç›®å½•
2. åœ¨ä¸‹æ‹‰èœå•æ˜¾ç¤ºæ‰€æœ‰å¯ç”¨æ•°å­—äºº
3. é€‰æ‹©åç‚¹å‡»"å¯åŠ¨"å³å¯ä½¿ç”¨

### åˆ›å»ºæ–°æ•°å­—äºº
1. åˆ‡æ¢åˆ°"åˆ›å»ºæ–°æ•°å­—äºº"
2. å¡«å†™ä¿¡æ¯ï¼š
   - **æ•°å­—äººID**ï¼šè‹±æ–‡åç§°ï¼ˆå¦‚ `avatarAlice`ï¼‰
   - **MP4è§†é¢‘**ï¼šä¸Šä¼ è®­ç»ƒè§†é¢‘
   - **WAVéŸ³é¢‘**ï¼šä¸Šä¼ å‚è€ƒéŸ³é¢‘ï¼ˆå¿…é¡»WAVæ ¼å¼ï¼‰
   - **éŸ³é¢‘æ–‡æœ¬**ï¼šå‡†ç¡®è¾“å…¥éŸ³é¢‘å†…å®¹
3. ç‚¹å‡»"å¼€å§‹è®­ç»ƒ"
4. ç­‰å¾…10-20åˆ†é’Ÿ
5. è®­ç»ƒå®Œæˆåè‡ªåŠ¨ç§»åŠ¨åˆ°å¯ç”¨åˆ—è¡¨

## ğŸ® ä½¿ç”¨è¯´æ˜

### ç•Œé¢å¸ƒå±€
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   ç³»ç»ŸçŠ¶æ€       â”‚    æ•°å­—äººè§†é¢‘     â”‚    ä½¿ç”¨è¯´æ˜      â”‚
â”‚   æ•°å­—äººç®¡ç†     â”‚    (WebRTC)      â”‚    çŠ¶æ€å›¾ä¾‹      â”‚
â”‚   åˆ›å»º/è®­ç»ƒ      â”‚    å¯åŠ¨/åœæ­¢      â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### çŠ¶æ€æ ‡è¯†
- âœ… **å°±ç»ª** - å¯ä»¥å¯åŠ¨ä½¿ç”¨
- â–¶ï¸ **è¿è¡Œä¸­** - æ­£åœ¨è¿è¡Œï¼ˆæ˜¾ç¤ºPIDï¼‰
- ğŸ”„ **è®­ç»ƒä¸­** - æ­£åœ¨è®­ç»ƒï¼Œè¯·ç­‰å¾…
- âŒ **é”™è¯¯** - éœ€è¦é‡æ–°è®­ç»ƒ

## âš ï¸ æ³¨æ„äº‹é¡¹

### æ–‡ä»¶æ ¼å¼è¦æ±‚
- **è§†é¢‘**ï¼šå¿…é¡»æ˜¯ `.mp4` æ ¼å¼
- **éŸ³é¢‘**ï¼šå¿…é¡»æ˜¯ `.wav` æ ¼å¼
- **åˆ†è¾¨ç‡**ï¼šå»ºè®® 256x256 æˆ–æ›´é«˜
- **éŸ³é¢‘æ—¶é•¿**ï¼š10-30ç§’æœ€ä½³

### Avatar IDå‘½å
- åªèƒ½ä½¿ç”¨è‹±æ–‡å’Œæ•°å­—
- ä¸éœ€è¦æ·»åŠ  `wav2lip256_` å‰ç¼€ï¼ˆç³»ç»Ÿè‡ªåŠ¨æ·»åŠ ï¼‰
- ä¾‹å¦‚ï¼šè¾“å…¥ `avatarAlice` â†’ ç³»ç»Ÿå¤„ç†ä¸º `wav2lip256_avatarAlice`

### è®­ç»ƒç»“æœå¤„ç†
- è®­ç»ƒå®Œæˆåè‡ªåŠ¨ä» `wav2lip/results/avatars/` ç§»åŠ¨åˆ° `data/avatars/`
- å¦‚æœç›®æ ‡å·²å­˜åœ¨ï¼Œä¼šè‡ªåŠ¨å¤‡ä»½åŸç‰ˆæœ¬
- éŸ³é¢‘æ–‡ä»¶è‡ªåŠ¨å¤åˆ¶åˆ° `wav/` ç›®å½•

## ğŸ› å¸¸è§é—®é¢˜

### Q: æ‰¾ä¸åˆ°æ•°å­—äººï¼Ÿ
**A:** æ£€æŸ¥ `data/avatars/` ç›®å½•ï¼Œç¡®ä¿æ–‡ä»¶å¤¹åç§°ä»¥ `wav2lip256_` å¼€å¤´

### Q: è®­ç»ƒå¤±è´¥ï¼Ÿ
**A:** 
- æ£€æŸ¥è§†é¢‘æ˜¯å¦ä¸ºMP4æ ¼å¼
- æ£€æŸ¥éŸ³é¢‘æ˜¯å¦ä¸ºWAVæ ¼å¼
- æŸ¥çœ‹æ—¥å¿—æ–‡ä»¶ `logs/train_*.log`

### Q: è§†é¢‘ä¸æ˜¾ç¤ºï¼Ÿ
**A:** 
- ç¡®è®¤WebRTCç«¯å£8010æœªè¢«å ç”¨
- æ£€æŸ¥LiveTalkingè¿›ç¨‹æ˜¯å¦æ­£å¸¸å¯åŠ¨
- æŸ¥çœ‹æ§åˆ¶å°è¾“å‡º

### Q: å¦‚ä½•åœæ­¢æ‰€æœ‰è¿›ç¨‹ï¼Ÿ
**A:** 
1. åœ¨ç•Œé¢ç‚¹å‡»"åœæ­¢"æŒ‰é’®
2. æˆ–å…³é—­æ§åˆ¶å°çª—å£
3. æˆ–ä½¿ç”¨ä»»åŠ¡ç®¡ç†å™¨ç»“æŸPythonè¿›ç¨‹

## ğŸ“Š åç«¯API

### æ–°å¢ç«¯ç‚¹
- `GET /avatars` - è·å–æ‰€æœ‰å¯ç”¨æ•°å­—äºº
- `POST /upload/video` - ä¸Šä¼ MP4è§†é¢‘
- `POST /upload/audio` - ä¸Šä¼ WAVéŸ³é¢‘
- `GET /training-status/{avatar_id}` - è·å–è®­ç»ƒçŠ¶æ€

### æ”¹è¿›åŠŸèƒ½
- è‡ªåŠ¨æ‰«æ `data/avatars` ç›®å½•
- è‡ªåŠ¨ç§»åŠ¨è®­ç»ƒç»“æœ
- æ”¯æŒå¤šæ ¼å¼éªŒè¯
- è¿›ç¨‹æ ‘ç®¡ç†

## ğŸ” è°ƒè¯•æŠ€å·§

### æŸ¥çœ‹æ—¥å¿—
```bash
# åç«¯æ—¥å¿—
logs/backend.log

# è®­ç»ƒæ—¥å¿—
logs/train_wav2lip256_avatarXXX_æ—¶é—´æˆ³.log

# è¿è¡Œæ—¥å¿—
logs/run_wav2lip256_avatarXXX_æ—¶é—´æˆ³.log
```

### æ‰‹åŠ¨æ£€æŸ¥ç›®å½•
```python
# æ£€æŸ¥å¯ç”¨æ•°å­—äºº
import os
avatars_dir = r"D:\Projects\See You Again\src\LiveTalking\LiveTalking-main\data\avatars"
print(os.listdir(avatars_dir))

# æ£€æŸ¥è®­ç»ƒç»“æœ
results_dir = r"D:\Projects\See You Again\src\LiveTalking\LiveTalking-main\wav2lip\results\avatars"
print(os.listdir(results_dir))
```

## âœ… å‡†å¤‡å°±ç»ª

V2ç‰ˆæœ¬å·²ç»å®Œå…¨é€‚é…ä½ çš„éœ€æ±‚ï¼š
- æ”¯æŒMP4è§†é¢‘å’ŒWAVéŸ³é¢‘
- è‡ªåŠ¨ç®¡ç†æ•°å­—äººæ–‡ä»¶
- ç®€åŒ–çš„æ“ä½œæµç¨‹
- æ›´å¥½çš„é”™è¯¯å¤„ç†

ç«‹å³å¼€å§‹ä½¿ç”¨ï¼š
```bash
# å¯åŠ¨ç³»ç»Ÿ
python livetalking_backend_v2.py
python frontend_v2.py
```

ç¥ä½ ä½¿ç”¨æ„‰å¿«ï¼ğŸ‰
